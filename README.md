# 群文件失效检查

一个为 [AstrBot](https://astrbot.app) 设计的插件，用于自动检查群聊中发送的文件是否在一段时间后失效，并在失效时发送通知。

## ✨ 功能

* **自动监控**: 自动检测群聊中的文件消息，无需任何命令。
* **延时检查**: 在文件发送30秒后进行检查，模拟用户稍后下载的场景，有效识别失效的文件。
* **失效通知**: 当检测到文件无法下载（失效、被屏蔽）时，在群内发送提醒消息。
* **群聊白名单**: 可通过后台配置，仅在指定的群聊中启用此功能，实现精准控制。
* **并发控制**: 内置处理队列，能有效应对短时间内接收大量文件（刷屏）的场景，防止因并发下载过多而导致失败。
* **自动清理**: 检查过程中下载的临时文件会自动删除，不占用硬盘空间。

## 🚀 安装

1. 下载本仓库。
2. 将整个 `astrbot_plugin_file_checker` 文件夹放入 `astrbot` 的 `plugins` 目录中。
3. 重启 AstrBot。

## ⚙️ 配置

本插件支持通过网页后台进行配置。首次加载后，请在 AstrBot 后台 -> 插件 页面找到本插件进行设置。

## 💡 使用

1. 安装并根据需要配置好白名单后，插件即可自动工作。
2. 当白名单内的群聊有成员发送文件时，插件会在后台创建一个延时检查任务。
3. 30秒后，如果文件确认失效，机器人会在该群聊发送一条通知，例如：“刚刚发送的文件「xxx.zip」经检查已失效或被服务器屏蔽。”
4. 如果文件有效，机器人则不会发送任何消息。

## ❤️ 支持

* [AstrBot 帮助文档](https://astrbot.app)
* 如果您在使用中遇到问题，欢迎在本仓库提交 [Issue](https://github.com/Foolllll-J/astrbot_plugin_file_checker/issues)。
